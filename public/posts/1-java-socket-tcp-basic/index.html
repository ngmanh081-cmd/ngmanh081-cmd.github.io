<!doctype html><html lang=en dir=auto data-theme=dark><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java | IndieGameDev.HuyManh</title><meta name=keywords content="Java,TCP,Socket,Tutorial"><meta name=description content="Hướng dẫn chi tiết từ A-Z cách hoạt động của mô hình Client-Server, khái niệm Handshake và code hoàn chỉnh cho ứng dụng Echo."><meta name=author content="Me"><link rel=canonical href=#ZgotmplZ><link crossorigin=anonymous href=/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as=style><link rel=icon href=#ZgotmplZ><link rel=icon type=image/png sizes=16x16 href=#ZgotmplZ><link rel=icon type=image/png sizes=32x32 href=#ZgotmplZ><link rel=apple-touch-icon href=#ZgotmplZ><link rel=mask-icon href=#ZgotmplZ><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=#ZgotmplZ><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>localStorage.getItem("pref-theme")==="light"&&(document.querySelector("html").dataset.theme="light")</script><meta property="og:url" content="hhtp://localhost:1313/posts/1-java-socket-tcp-basic/"><meta property="og:site_name" content="IndieGameDev.HuyManh"><meta property="og:title" content="Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java"><meta property="og:description" content="Hướng dẫn chi tiết từ A-Z cách hoạt động của mô hình Client-Server, khái niệm Handshake và code hoàn chỉnh cho ứng dụng Echo."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-26T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-26T00:00:00+00:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="TCP"><meta property="article:tag" content="Socket"><meta property="article:tag" content="Tutorial"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java"><meta name=twitter:description content="Hướng dẫn chi tiết từ A-Z cách hoạt động của mô hình Client-Server, khái niệm Handshake và code hoàn chỉnh cho ứng dụng Echo."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"hhtp://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java","item":"hhtp://localhost:1313/posts/1-java-socket-tcp-basic/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java","name":"Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java","description":"Hướng dẫn chi tiết từ A-Z cách hoạt động của mô hình Client-Server, khái niệm Handshake và code hoàn chỉnh cho ứng dụng Echo.","keywords":["Java","TCP","Socket","Tutorial"],"articleBody":"Lập trình mạng (Network Programming) là xương sống của Internet. Mọi ứng dụng từ Web, Game Online, cho đến hệ thống ngân hàng đều dựa trên việc truyền tải dữ liệu giữa các máy tính. Trong bài viết này, chúng ta sẽ bắt đầu với giao thức phổ biến nhất: TCP (Transmission Control Protocol) thông qua thư viện java.net của Java.\nChúng ta sẽ xây dựng một ứng dụng “Hello World” của thế giới mạng: Echo Server. Nguyên lý của nó rất đơn giản: Client gửi câu gì, Server sẽ “nhại” lại y hệt câu đó.\n1. Lý thuyết cơ bản về TCP Socket Trước khi đi vào code, bạn cần hiểu điều gì xảy ra “bên dưới nắp capo”.\nSocket là gì? Hãy tưởng tượng Socket giống như một bến cảng. Để một con tàu (dữ liệu) đi từ thành phố A (Client) sang thành phố B (Server), nó cần biết:\nĐịa chỉ IP: Thành phố đích đến (Ví dụ: 192.168.1.1 hoặc localhost). Port (Cổng): Số hiệu bến cảng cụ thể (Ví dụ: 80, 443, 8080). Quy trình bắt tay 3 bước (3-way Handshake) TCP là giao thức tin cậy (reliable). Để đảm bảo kết nối, nó thực hiện quy trình bắt tay:\nSYN: Client gửi yêu cầu kết nối (“Em muốn kết nối với anh”). SYN-ACK: Server đồng ý và xác nhận (“Ok, anh nghe đây”). ACK: Client xác nhận lại (“Vậy mình bắt đầu nói chuyện nhé”). Trong Java, toàn bộ quy trình phức tạp này được gói gọn trong một dòng lệnh new Socket() hoặc server.accept().\n2. Xây dựng Server (Phía máy chủ) Server cần làm hai việc chính: Lắng nghe tại một cổng cụ thể và Chờ đợi Client kết nối.\nDưới đây là code đầy đủ cho EchoServer.java:\nimport java.io.*; import java.net.*; public class EchoServer { // Chọn một cổng chưa được sử dụng (thường \u003e 1024) public static final int PORT = 6666; public static void main(String[] args) { System.out.println(\"Server đang khởi động...\"); // Sử dụng try-with-resources để tự động đóng socket khi xong try (ServerSocket serverSocket = new ServerSocket(PORT)) { System.out.println(\"Server đang lắng nghe tại cổng \" + PORT); // Vòng lặp vô tận để server luôn chạy while (true) { // 1. Chặn (Block) cho đến khi có Client kết nối Socket socket = serverSocket.accept(); System.out.println(\"Client mới đã kết nối: \" + socket.getInetAddress()); // 2. Tạo luồng đọc/ghi dữ liệu InputStream input = socket.getInputStream(); BufferedReader reader = new BufferedReader(new InputStreamReader(input)); OutputStream output = socket.getOutputStream(); PrintWriter writer = new PrintWriter(output, true); // 3. Đọc dữ liệu từ Client gửi lên String text; while ((text = reader.readLine()) != null) { System.out.println(\"Nhận được: \" + text); // Logic của Echo Server: Gửi lại chính câu đó writer.println(\"Server phản hồi: \" + text); // Nếu Client gõ 'bye' thì ngắt kết nối if (\"bye\".equalsIgnoreCase(text)) { break; } } // Đóng kết nối với client này socket.close(); System.out.println(\"Client đã ngắt kết nối.\"); } } catch (IOException ex) { System.out.println(\"Lỗi Server: \" + ex.getMessage()); ex.printStackTrace(); } } } ","wordCount":"501","inLanguage":"en","datePublished":"2025-12-26T00:00:00Z","dateModified":"2025-12-26T00:00:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"hhtp://localhost:1313/posts/1-java-socket-tcp-basic/"},"publisher":{"@type":"Organization","name":"IndieGameDev.HuyManh","logo":{"@type":"ImageObject","url":"hhtp://localhost:1313/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=#ZgotmplZ accesskey=h title="IndieGameDev.HuyManh (Alt + H)">IndieGameDev.HuyManh</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=#ZgotmplZ title="Trang chủ"><span>Trang chủ</span></a></li><li><a href=#ZgotmplZ title="Bài viết"><span>Bài viết</span></a></li><li><a href=#ZgotmplZ title="Giới thiệu"><span>Giới thiệu</span></a></li><li><a href=#ZgotmplZ title="Liên hệ"><span>Liên hệ</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Nhập môn Lập trình mạng: Xây dựng TCP Echo Server với Java</h1><div class=post-meta><span title='2025-12-26 00:00:00 +0000 UTC'>December 26, 2025</span>&nbsp;·&nbsp;<span>Me</span></div></header><div class=post-content><p>Lập trình mạng (Network Programming) là xương sống của Internet. Mọi ứng dụng từ Web, Game Online, cho đến hệ thống ngân hàng đều dựa trên việc truyền tải dữ liệu giữa các máy tính. Trong bài viết này, chúng ta sẽ bắt đầu với giao thức phổ biến nhất: <strong>TCP (Transmission Control Protocol)</strong> thông qua thư viện <code>java.net</code> của Java.</p><p>Chúng ta sẽ xây dựng một ứng dụng &ldquo;Hello World&rdquo; của thế giới mạng: <strong>Echo Server</strong>. Nguyên lý của nó rất đơn giản: Client gửi câu gì, Server sẽ &ldquo;nhại&rdquo; lại y hệt câu đó.</p><h2 id=1-lý-thuyết-cơ-bản-về-tcp-socket>1. Lý thuyết cơ bản về TCP Socket<a hidden class=anchor aria-hidden=true href=#1-lý-thuyết-cơ-bản-về-tcp-socket>#</a></h2><p>Trước khi đi vào code, bạn cần hiểu điều gì xảy ra &ldquo;bên dưới nắp capo&rdquo;.</p><h3 id=socket-là-gì>Socket là gì?<a hidden class=anchor aria-hidden=true href=#socket-là-gì>#</a></h3><p>Hãy tưởng tượng Socket giống như một bến cảng. Để một con tàu (dữ liệu) đi từ thành phố A (Client) sang thành phố B (Server), nó cần biết:</p><ol><li><strong>Địa chỉ IP:</strong> Thành phố đích đến (Ví dụ: 192.168.1.1 hoặc localhost).</li><li><strong>Port (Cổng):</strong> Số hiệu bến cảng cụ thể (Ví dụ: 80, 443, 8080).</li></ol><h3 id=quy-trình-bắt-tay-3-bước-3-way-handshake>Quy trình bắt tay 3 bước (3-way Handshake)<a hidden class=anchor aria-hidden=true href=#quy-trình-bắt-tay-3-bước-3-way-handshake>#</a></h3><p>TCP là giao thức tin cậy (reliable). Để đảm bảo kết nối, nó thực hiện quy trình bắt tay:</p><ol><li><strong>SYN:</strong> Client gửi yêu cầu kết nối (&ldquo;Em muốn kết nối với anh&rdquo;).</li><li><strong>SYN-ACK:</strong> Server đồng ý và xác nhận (&ldquo;Ok, anh nghe đây&rdquo;).</li><li><strong>ACK:</strong> Client xác nhận lại (&ldquo;Vậy mình bắt đầu nói chuyện nhé&rdquo;).</li></ol><p>Trong Java, toàn bộ quy trình phức tạp này được gói gọn trong một dòng lệnh <code>new Socket()</code> hoặc <code>server.accept()</code>.</p><hr><h2 id=2-xây-dựng-server-phía-máy-chủ>2. Xây dựng Server (Phía máy chủ)<a hidden class=anchor aria-hidden=true href=#2-xây-dựng-server-phía-máy-chủ>#</a></h2><p>Server cần làm hai việc chính: <strong>Lắng nghe</strong> tại một cổng cụ thể và <strong>Chờ đợi</strong> Client kết nối.</p><p>Dưới đây là code đầy đủ cho <code>EchoServer.java</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.net.*;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>EchoServer</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Chọn một cổng chưa được sử dụng (thường &gt; 1024)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> PORT <span style=color:#f92672>=</span> 6666;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Server đang khởi động...&#34;</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Sử dụng try-with-resources để tự động đóng socket khi xong</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> (ServerSocket serverSocket <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ServerSocket(PORT)) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Server đang lắng nghe tại cổng &#34;</span> <span style=color:#f92672>+</span> PORT);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Vòng lặp vô tận để server luôn chạy</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 1. Chặn (Block) cho đến khi có Client kết nối</span>
</span></span><span style=display:flex><span>                Socket socket <span style=color:#f92672>=</span> serverSocket.<span style=color:#a6e22e>accept</span>();
</span></span><span style=display:flex><span>                System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Client mới đã kết nối: &#34;</span> <span style=color:#f92672>+</span> socket.<span style=color:#a6e22e>getInetAddress</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 2. Tạo luồng đọc/ghi dữ liệu</span>
</span></span><span style=display:flex><span>                InputStream input <span style=color:#f92672>=</span> socket.<span style=color:#a6e22e>getInputStream</span>();
</span></span><span style=display:flex><span>                BufferedReader reader <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> BufferedReader(<span style=color:#66d9ef>new</span> InputStreamReader(input));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                OutputStream output <span style=color:#f92672>=</span> socket.<span style=color:#a6e22e>getOutputStream</span>();
</span></span><span style=display:flex><span>                PrintWriter writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter(output, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#75715e>// 3. Đọc dữ liệu từ Client gửi lên</span>
</span></span><span style=display:flex><span>                String text;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>while</span> ((text <span style=color:#f92672>=</span> reader.<span style=color:#a6e22e>readLine</span>()) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Nhận được: &#34;</span> <span style=color:#f92672>+</span> text);
</span></span><span style=display:flex><span>                    
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// Logic của Echo Server: Gửi lại chính câu đó</span>
</span></span><span style=display:flex><span>                    writer.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Server phản hồi: &#34;</span> <span style=color:#f92672>+</span> text);
</span></span><span style=display:flex><span>                    
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// Nếu Client gõ &#39;bye&#39; thì ngắt kết nối</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (<span style=color:#e6db74>&#34;bye&#34;</span>.<span style=color:#a6e22e>equalsIgnoreCase</span>(text)) {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Đóng kết nối với client này</span>
</span></span><span style=display:flex><span>                socket.<span style=color:#a6e22e>close</span>();
</span></span><span style=display:flex><span>                System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Client đã ngắt kết nối.&#34;</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (IOException ex) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Lỗi Server: &#34;</span> <span style=color:#f92672>+</span> ex.<span style=color:#a6e22e>getMessage</span>());
</span></span><span style=display:flex><span>            ex.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=#ZgotmplZ>Java</a></li><li><a href=#ZgotmplZ>TCP</a></li><li><a href=#ZgotmplZ>Socket</a></li><li><a href=#ZgotmplZ>Tutorial</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=#ZgotmplZ>IndieGameDev.HuyManh</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>